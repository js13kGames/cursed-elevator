pxtex=(t,i,s,e,h=10,n=10,o=10,r=t.getContext`2d`,W,l,a=Math.random)=>{for(t.width=n,t.height=o,W=n;W--;)for(l=o;l--;)r.fillStyle=`hsl(${i+(a()-.5)*h},${s+(a()-.5)*h}%,${e+(a()-.5)*h}%)`,r.fillRect(W,l,1,1)},W={i:{},reset:i=>{W.canvas=i,W.objs=0,W.current={},W.next={},W.o={},W.W=!1,W.gl=i.getContext("webgl2"),W.gl.blendFunc(770,771),W.gl.activeTexture(33984),W.program=W.gl.createProgram(),W.gl.enable(2884),W.gl.shaderSource(t=W.gl.createShader(35633),"#version 300 es\nprecision highp float;in vec4 pos, col, uv;uniform mat4 pv, eye, m, im;uniform vec4 bb;out vec4 v_pos, v_col, v_uv;void main() {gl_Position = pv * (v_pos = bb.z > 0.? m[3] + eye * (pos * bb): m * pos);v_col = col;v_uv = uv;}"),W.gl.compileShader(t),W.gl.attachShader(W.program,t),W.gl.shaderSource(t=W.gl.createShader(35632),"#version 300 es\nprecision highp float;in vec4 v_pos, v_col, v_uv;uniform vec3 light;uniform vec4 o;uniform sampler2D sampler;out vec4 c;void main() {float ambient = o[2];vec3 light_dir = normalize(light - v_pos.xyz);vec3 normal = normalize(cross(dFdx(v_pos.xyz), dFdy(v_pos.xyz)));float lambert = max(0., dot(light_dir, normal)) * 0.7;float specular = 0.;if(o[0] > 0.) {vec3 R = reflect(-light_dir, normal);vec3 V = normalize(-v_pos.xyz);float specAngle = max(dot(R, V), 0.);specular = pow(specAngle, o[0]) * 0.3;}c = mix(texture(sampler, v_uv.xy), v_col, o[3]);float f = o[1] > 0. ? ambient + lambert + specular : 1.;c = vec4(c.rgb * f, c.a);}"),W.gl.compileShader(t),W.gl.attachShader(W.program,t),W.gl.linkProgram(W.program),W.gl.useProgram(W.program),W.gl.clearColor(1,1,1,1),W.clearColor=t=>W.gl.clearColor(...W.l(t)),W.clearColor("fff"),W.gl.enable(2929),W.u({y:1}),W.camera({fov:30}),setTimeout(W.draw,16)},_:(t,i,s,e,h=[],n,o,r,l,a,c,d,u)=>{if(t.n||="o"+W.objs++,t.size&&(t.w=t.h=t.d=t.size),t.t?.width&&!W.o[t.t.id]&&(s=W.gl.createTexture(),W.gl.pixelStorei(37441,!0),W.gl.bindTexture(3553,s),W.gl.pixelStorei(37440,1),W.gl.texImage2D(3553,0,6408,6408,5121,t.t),W.gl.generateMipmap(3553),W.o[t.t.id]=s),t.fov){const i=1/Math.tan(t.fov*Math.PI/180),s=.1,e=80,h=e-s;W.projection=new DOMMatrix([i/(W.canvas.width/W.canvas.height),0,0,0,0,i,0,0,0,0,-(e+s)/h,-1,0,0,-2*e*s/h,0])}t={type:i,...W.current[t.n]=W.next[t.n]||{w:1,h:1,d:1,x:0,y:0,z:0,rx:0,ry:0,rz:0,b:"888",mix:0},...t,f:0},W.i[t.type]?.vertices&&!W.i?.[t.type].verticesBuffer&&(W.gl.bindBuffer(34962,W.i[t.type].verticesBuffer=W.gl.createBuffer()),W.gl.bufferData(34962,new Float32Array(W.i[t.type].vertices),35044),W.i[t.type].p||W.smooth(t),W.i[t.type].p&&(W.gl.bindBuffer(34962,W.i[t.type].normalsBuffer=W.gl.createBuffer()),W.gl.bufferData(34962,new Float32Array(W.i[t.type].p.flat()),35044))),W.i[t.type]?.uv&&!W.i[t.type].uvBuffer&&(W.gl.bindBuffer(34962,W.i[t.type].uvBuffer=W.gl.createBuffer()),W.gl.bufferData(34962,new Float32Array(W.i[t.type].uv),35044)),W.i[t.type]?.indices&&!W.i[t.type].indicesBuffer&&(W.gl.bindBuffer(34963,W.i[t.type].indicesBuffer=W.gl.createBuffer()),W.gl.bufferData(34963,new Uint16Array(W.i[t.type].indices),35044)),t.t?t.t&&!t.mix&&(t.mix=0):t.mix=1,W.next[t.n]=t},draw:(t,i,s,e,h=[])=>{if(i=t-W.lastFrame,W.lastFrame=t,requestAnimationFrame(W.draw),W.W)W.onDraw(t);else{for(e in W.next.camera.g&&W.m(W.next[W.next.camera.g],i,1),s=W.animation("camera"),W.next?.camera?.g&&s.preMultiplySelf(W.next[W.next.camera.g].v),W.gl.uniformMatrix4fv(W.gl.getUniformLocation(W.program,"eye"),!1,s.toFloat32Array()),s.invertSelf(),s.preMultiplySelf(W.projection),W.gl.uniformMatrix4fv(W.gl.getUniformLocation(W.program,"pv"),!1,s.toFloat32Array()),W.gl.clear(16640),W.next){const t=W.next[e];t.t||1!=W.l(t.b)[3]?h.push(t):W.m(t,i)}for(e of(h.sort(((t,i)=>W.k(i)-W.k(t))),W.gl.enable(3042),h))["plane","billboard"].includes(e.type)&&W.gl.depthMask(0),W.m(e,i),W.gl.depthMask(1);W.gl.disable(3042),W.gl.uniform3f(W.gl.getUniformLocation(W.program,"light"),W.M("light","x"),W.M("light","y"),W.M("light","z")),W.onDraw(t)}},m:(t,i,s=["camera","light","group"].includes(t.type),e)=>{t.t&&(W.gl.bindTexture(3553,W.o[t.t.id]),W.gl.uniform1i(W.gl.getUniformLocation(W.program,"sampler"),0)),t.f>=t.a?(t.onAnimDone?.(),delete t.a,delete t.onAnimDone):t.f<t.a&&(t.f+=i),t.f>t.a&&(t.f=t.a),W.next[t.n].v=W.animation(t.n),W.next[t.g]&&W.next[t.n].v.preMultiplySelf(W.next[t.g].v),W.gl.uniformMatrix4fv(W.gl.getUniformLocation(W.program,"m"),!1,W.next[t.n].v.toFloat32Array()),W.gl.uniformMatrix4fv(W.gl.getUniformLocation(W.program,"im"),!1,DOMMatrix.fromMatrix(W.next[t.n].v).invertSelf().toFloat32Array()),s||(W.gl.bindBuffer(34962,W.i[t.type].verticesBuffer),W.gl.vertexAttribPointer(e=W.gl.getAttribLocation(W.program,"pos"),3,5126,!1,0,0),W.gl.enableVertexAttribArray(e),W.i[t.type].uvBuffer&&(W.gl.bindBuffer(34962,W.i[t.type].uvBuffer),W.gl.vertexAttribPointer(e=W.gl.getAttribLocation(W.program,"uv"),2,5126,!1,0,0),W.gl.enableVertexAttribArray(e)),W.gl.uniform4f(W.gl.getUniformLocation(W.program,"o"),t.s,t.ns?0:1,W.ambientLight||.2,t.mix),W.gl.uniform4f(W.gl.getUniformLocation(W.program,"bb"),t.w,t.h,"billboard"==t.type,0),W.i[t.type].indicesBuffer&&W.gl.bindBuffer(34963,W.i[t.type].indicesBuffer),W.gl.vertexAttrib4fv(W.gl.getAttribLocation(W.program,"col"),W.l(t.b)),W.i[t.type].indicesBuffer?W.gl.drawElements(4,W.i[t.type].indices.length,5123,0):W.gl.drawArrays(4,0,W.i[t.type].vertices.length/3))},M:(t,i)=>{const s=W.next[t];if(!s?.a)return s[i];const e=W.current[t];return e[i]+(s[i]-e[i])*(s.f/s.a)},animation:(t,i=new DOMMatrix)=>W.next[t]?i.translateSelf(W.M(t,"x"),W.M(t,"y"),W.M(t,"z")).rotateSelf(W.M(t,"rx"),W.M(t,"ry"),W.M(t,"rz")).scaleSelf(W.M(t,"w"),W.M(t,"h"),W.M(t,"d")):i,k:(t,i=W.next.camera)=>t?.v&&i?.v?(i.v.m41-t.v.m41)**2+(i.v.m42-t.v.m42)**2+(i.v.m43-t.v.m43)**2:0,O:t=>W.ambientLight=t,l:t=>[...t.match(t.length<5?/./g:/../g).map((i=>("0x"+i)/(t.length<5?15:255))),1],add:(t,i)=>{W.i[t]=i,i.p&&(W.i[t].customNormals=1),W[t]=i=>W._(i,t)},group:t=>W._(t,"group"),move:t=>setTimeout((()=>{W._(t)}),1),delete:t=>setTimeout((()=>{delete W.next[t]}),1),camera:t=>setTimeout((()=>{W._(t,t.n="camera")}),1),u:t=>W._(t,t.n="light")},W.smooth=(t,i={},s=[],e,h,n,o,r,l,a,c,d,u,f)=>{for(W.i[t.type].p=[],n=0;n<W.i[t.type].vertices.length;n+=3)s.push(W.i[t.type].vertices.slice(n,n+3));for((e=W.i[t.type].indices)?h=1:(e=s,h=0),n=0;n<2*e.length;n+=3){o=n%e.length,r=s[c=h?W.i[t.type].indices[o]:o],l=s[d=h?W.i[t.type].indices[o+1]:o+1],a=s[u=h?W.i[t.type].indices[o+2]:o+2],AB=[l[0]-r[0],l[1]-r[1],l[2]-r[2]],BC=[a[0]-l[0],a[1]-l[1],a[2]-l[2]],f=n>o?[0,0,0]:[AB[1]*BC[2]-AB[2]*BC[1],AB[2]*BC[0]-AB[0]*BC[2],AB[0]*BC[1]-AB[1]*BC[0]];const _=r[0]+"_"+r[1]+"_"+r[2],y=l[0]+"_"+l[1]+"_"+l[2],x=a[0]+"_"+a[1]+"_"+a[2];i[_]||=[0,0,0],i[y]||=[0,0,0],i[x]||=[0,0,0],W.i[t.type].p[c]=i[_]=i[_].map(((t,i)=>t+f[i])),W.i[t.type].p[d]=i[y]=i[y].map(((t,i)=>t+f[i])),W.i[t.type].p[u]=i[x]=i[x].map(((t,i)=>t+f[i]))}},W.add("plane",{vertices:[.5,.5,0,-.5,.5,0,-.5,-.5,0,.5,.5,0,-.5,-.5,0,.5,-.5,0],uv:[1,1,0,1,0,0,1,1,0,0,1,0]}),W.add("billboard",W.i.plane),W.add("cube",{vertices:[.5,.5,.5,-.5,.5,.5,-.5,-.5,.5,.5,.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,.5,-.5,.5,.5,.5,.5,-.5,.5,.5,.5,-.5,.5,-.5,.5,.5,-.5,-.5,.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,.5,.5,-.5,-.5,.5,.5,.5,.5,.5,-.5,.5,.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,.5,.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,.5,-.5,.5,.5,-.5,.5,-.5,-.5,-.5,.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,.5,-.5,-.5,.5,-.5,-.5,-.5,.5,-.5,.5,-.5,-.5,-.5,.5,-.5,-.5],uv:[1,1,0,1,0,0,1,1,0,0,1,0,1,1,0,1,0,0,1,1,0,0,1,0,1,1,0,1,0,0,1,1,0,0,1,0,1,1,0,1,0,0,1,1,0,0,1,0,1,1,0,1,0,0,1,1,0,0,1,0,1,1,0,1,0,0,1,1,0,0,1,0]}),W.cube=t=>W._(t,"cube");let i=new AudioContext;"use strict";const s={A:'"Courier New", monospace',T:"Arial, sans-serif",N:'"Times New Roman", serif',S:30,D:60,I:"Triskaidekaphobia",C(t){if(!t.g)return t;const i=W.next[t.g];return{x:i.x+t.x,y:i.y+t.y,z:i.z+t.z,w:t.w,h:t.h}},init(){s.P.F((()=>{s.R.init(),s.L.init()}))},B(){const t=localStorage.getItem("2024_sd_elevator.save");return t?JSON.parse(t):null},K(t){localStorage.setItem("2024_sd_elevator.save",JSON.stringify({level:t}))}};window.addEventListener("load",(()=>s.init())),s.P={G:{s_note1:"I'm leaving this note for whoever gets lost\nhere as well. You are now stuck in a cursed\nelevator. But if I'm not in here (and neither\nmy dead body), I must've made it out!\n\nDon't worry, I'm going to leave you some\ntips as I figure this situation out!",s_note2:"Everything went black and now I am on 1 again. My note is also gone.\nThere is a fellow on floor 3, seems harmless.",s_note3:"Back again, last note gone again. Floor 7 is new.",s_note4:"Guess this is from that Note-Writter. Found a note book with torn pages. Feeling like keeping up the tradition.",s_note5a:"NO MORE REPEATS",s_note5b:"SICK OF PAIN",s_note5c:"WHERE IS THE BUTTON",s_note6:"Lost note book. Is 1 the way out? Got hope.",blue1:"Please go. Leave me alone.",blue2:"Go! Don't let it find me.",blue3:"not...alone",blue4:"It won't find me here, right? Why come back? Oh, it smells rotten... Please go. Leave me alone.",pink1:"Join us? Safe together. Step out the elevator. Let us huddle together.",pink2:"Offer still stands. Always welcome."},o:{},U(){for(let t=0;t<14;t++){const i="s_lbl_btn"+t,e=0==t?"><":String(t).padStart(2,"0"),[h,n]=s.L.J(100,70,i);n.font="600 32px "+s.T,n.textBaseline="middle",n.fillText(e,50,37),this.o[i]=h}},V(){const t=Math.round(70.7),i=s.L.J(50,t,"paper")[0];pxtex(i,0,0,95,3,50,t),this.o.$=i},H(){const t=s.L.J(200,300,"wall")[0];pxtex(t,0,0,20,3,200,300),this.o.j=t;const i=s.L.J(100,100,"ceil")[0];pxtex(i,0,0,100,3,100,100),this.o.ceil=i;const e=s.L.J(100,100,"floor")[0];pxtex(e,0,0,10,1,100,100),this.o.floor=e;const h=s.L.J(40,300,"fs")[0];pxtex(h,0,0,20,3,40,300),this.o.Y=h;const n=s.L.J(200,75,"ft")[0];pxtex(n,0,0,20,3,200,75),this.o.q=n},X(){const t=Math.round(120),[i,e]=s.L.J(600,t,"title");e.fillStyle="#f00",e.font="600 64px "+s.N,e.fillText(s.I,300,t/2),this.o.title=i},Z(t,i){const e="audio:"+t+i;if(this.o[e])return this.o[e];const h=Math.round(100),[n,o]=s.L.J(200,h,e);return o.fillStyle="#"+i,o.font="36px "+s.T,o.textBaseline="middle",o.fillText(String(t),100,h/2+6),this.o[e]=n,n},tt(t){const i="dis:"+t;if(this.o[i])return this.o[i];const e=200,h=Math.round(100),[n,o]=s.L.J(e,h,i);return o.fillStyle="#f00",o.fillRect(0,0,e,h),o.fillStyle="#fff",o.font="600 64px "+s.A,o.textBaseline="middle",o.fillText(String(t),100,h/2+6),this.o[i]=n,n},it(t,i){const e="eyes:"+t+i;if(this.o[e])return this.o[e];const[h,n]=s.L.J(200,50,e);return n.fillStyle="#"+i,n.font="600 42px "+s.A,n.textBaseline="middle",n.fillText(String(t),100,25),this.o[e]=h,h},F(t){this.X(),this.U(),this.H(),this.V(),t()}},s.Audio={st:[.3,0,626,,.01,.01,,2.2,,,,,,,,.1,.01,.79,.02],et:[1.5,0,783.99,.07,,1.6,1,2,,,,,,,,,,.3,.15],ERROR:[.3,0,71,,.02,.05,3,.2,,68,,,,,,,.01,.96,.02,,389],play(t){((t=1,s=.05,e=220,h=0,n=0,o=.1,r=0,W=1,l=0,a=0,c=0,d=0,u=0,f=0,_=0,y=0,x=0,g=1,p=0,m=0,b=0)=>{let w=Math,v=2*w.PI,z=44100,k=l*=500*v/z/z,M=e*=(1-s+2*s*w.random(s=[]))*v/z,O=0,A=0,T=0,E=1,N=0,S=0,D=0,I=b<0?-1:1,C=v*I*b*2/z,F=w.cos(C),P=w.sin,R=P(C)/4,L=1+R,B=-2*F/L,K=(1-R)/L,G=(1+I*F)/2/L,U=-(I+F)/L,J=G,V=0,$=0,H=0,j=0;for(a*=500*v/z**3,_*=v/z,c*=v/z,d*=z,u=z*u|0,t*=.3,I=(h=z*h+9)+(p*=z)+(n*=z)+(o*=z)+(x*=z)|0;T<I;s[T++]=D*t)++S%(100*y|0)||(D=r?1<r?2<r?3<r?P(O**3):w.max(w.min(w.tan(O),1),-1):1-(2*O/v%2+2)%2:1-4*w.abs(w.round(O/v)-O/v):P(O),D=(u?1-m+m*P(v*T/u):1)*(D<0?-1:1)*w.abs(D)**W*(T<h?T/h:T<h+p?1-(T-h)/p*(1-g):T<h+p+n?g:T<I-x?(I-T-x)/o*g:0),D=x?D/2+(x>T?0:(T<I-x?1:(I-T)/x)*s[T-x|0]/2/t):D,b&&(D=j=J*V+U*(V=$)+G*($=D)-K*H-B*(H=j))),C=(e+=l+=a)*w.cos(_*A++),O+=C+C*f*P(T**5),E&&++E>d&&(e+=c,M+=c,E=0),!u||++N%u||(e=M,l=k,E=E||1);(t=i.createBuffer(1,I,z)).getChannelData(0).set(s),(e=i.createBufferSource()).buffer=t,e.connect(i.destination),e.start()})(...t)},text(t,i,e,h){const n=s.P.Z(t,i),o=.01*e;W.plane({n:n.id,g:h.g,x:h.x,y:h.y+.05,z:h.z+.1,w:.5,h:.25,t:n,ns:1}),W.move({n:n.id,y:h.y+.05+o,a:1e3*e,onAnimDone:()=>W.delete(n.id)})}},s.R={ht:{nt:1,ot:2,rt:3,Wt:10,lt:11,ct:12,dt:13},ut:{},ft:{},_t:{},yt:{},xt(){this.gt={[this.ht.nt]:{keyboard:["Escape"]},[this.ht.lt]:{keyboard:["ArrowUp","KeyW","KeyZ","KeyY"]},[this.ht.Wt]:{keyboard:["ArrowLeft","KeyA","KeyQ"]},[this.ht.dt]:{keyboard:["ArrowDown","KeyS"]},[this.ht.ct]:{keyboard:["ArrowRight","KeyD"]},[this.ht.ot]:{keyboard:["KeyE","Enter"]}}},bt(){let t=0,i=0;return this.wt(this.ht.Wt)?t=-1:this.wt(this.ht.ct)&&(t=1),this.wt(this.ht.lt)?i=-1:this.wt(this.ht.dt)&&(i=1),{x:t,y:i}},vt(t){return this.gt[t]},init(){this.xt(),this.zt()},wt(t,i){const s=this.vt(t);for(const t of s.keyboard)if(this.kt(t,i))return!0;return!1},kt(t,i){const s=this.yt[t];return!(!s||!s.time)&&(i&&(s.time=0,s.Mt=!0),!0)},Ot(t,i){const s=this.ft[t]||[];s.push(i),this.ft[t]=s},At(t,i){const s=this._t[t]||[];s.push(i),this._t[t]=s},zt(){document.body.onkeydown=t=>{const i=this.yt[t.code];i&&i.Mt||(this.yt[t.code]={time:Date.now()},this.ft[t.code]&&this.ft[t.code].forEach((t=>t())))},document.body.onkeyup=t=>{this.yt[t.code]={time:0},this._t[t.code]&&this._t[t.code].forEach((t=>t()))}}},s.L={camera:{rx:0,ry:0},Tt:!1,Et:null,Nt:null,St:null,Dt:null,It:new DOMPoint(0,0,-1),Ct:0,Ft(){let t=[];const i=this.Pt(),s={min:[],max:[]};for(const e in W.next){if(!e.startsWith("s_"))continue;const h=W.next[e];let n=0;if("plane"!=h.type&&"billboard"!=h.type&&(n=h.d),s.min[0]=h.x-h.w/2,s.min[1]=h.y-h.h/2,s.min[2]=h.z-n/2,h.g){const t=W.next[h.g];s.min[0]+=t.x,s.min[1]+=t.y,s.min[2]+=t.z}s.max[0]=s.min[0]+h.w,s.max[1]=s.min[1]+h.h,s.max[2]=s.min[2]+n,90!=h.ry&&-90!=h.ry||(s.min[0]-=h.w/2,s.max[0]+=h.w/2,s.min[2]-=h.w/2,s.max[2]+=h.w/2);const o=this.Rt(i,s);o&&t.push([h,o])}const e=this.Lt(i.origin,t);return!e?.n.startsWith("s__")&&e},Bt(t){const i=Math.round(Math.min(735.28,window.innerHeight-40)),e=(this.Nt.width-520)/2,h=(this.Nt.height-i)/2;this.Dt.drawImage(s.P.o.$,e,h,520,i),this.Dt.fillStyle="#000",this.Dt.font="24px "+s.T,this.Dt.textAlign="left",this.Dt.textBaseline="top";const n=t.split("\n");for(let t=0;t<n.length;t++)this.Dt.fillText(n[t],e+20,h+20+29*t)},Kt(){this.Dt.fillStyle="#00000070",this.Dt.fillRect(0,0,this.Nt.width,this.Nt.height),this.Dt.fillStyle="#fff",this.Dt.font="96px "+s.N,this.Dt.textAlign="center",this.Dt.fillText("PAUSED",this.Nt.width/2,this.Nt.height/2)},Lt(t,i){if(1==i.length)return i[0][0];let s=null,e=1/0;for(let h=0;h<i.length;h++){const n=i[h][1],o=[n[0]-t[0],n[1]-t[1],n[2]-t[2]],r=Math.sqrt(o[0]*o[0]+o[1]*o[1]+o[2]*o[2]);r<e&&(s=i[h][0],e=r)}return s},J(t,i,s){const e=document.createElement("canvas");e.width=t,e.height=i,s&&(e.id=s);const h=e.getContext("2d",{alpha:!0});return h.imageSmoothingEnabled=!1,h.textAlign="center",[e,h]},Pt(){const t=W.next.camera,i=(new DOMMatrix).rotateSelf(t.rx,t.ry,t.rz),s={origin:[t.x,t.y,t.z],dir:this.It.matrixTransform(i)};return s.dir=[s.dir.x,s.dir.y,s.dir.z],s},init(){this.Et=document.getElementById("c"),this.Nt=document.getElementById("ui"),this.Dt=this.Nt.getContext("2d",{alpha:!0}),this.Dt.imageSmoothingEnabled=!1,this.resize(),W.onDraw=this.update.bind(this),W.reset(this.Et),W.clearColor("000"),W.O(.2),this.zt(),this.level=new s.Gt},Rt(t,i){let s=!0,e=[],h=[],n=[],o=[];for(let h=0;h<3;h++)t.origin[h]<i.min[h]?(e[h]=1,n[h]=i.min[h],s=!1):t.origin[h]>i.max[h]?(e[h]=0,n[h]=i.max[h],s=!1):e[h]=2;if(s)return t.origin;for(let i=0;i<3;i++)2!=e[i]&&0!=t.dir[i]?h[i]=(n[i]-t.origin[i])/t.dir[i]:h[i]=-1;let r=0;for(let t=1;t<3;t++)h[r]<h[t]&&(r=t);if(h[r]<0)return null;for(let s=0;s<3;s++)if(r!=s){if(o[s]=t.origin[s]+h[r]*t.dir[s],o[s]<i.min[s]||o[s]>i.max[s])return null}else o[s]=n[s];return o},pause(){this.W=!0,document.body.classList.add("p"),W.W=!0},zt(){let t=null,i=null;window.addEventListener("resize",(t=>this.resize()));const e=s.R.vt(s.R.ht.nt),h=()=>{this.Ut(),t=null,i=null};e.keyboard.forEach((t=>s.R.At(t,h))),this.Et.addEventListener("mousedown",(t=>{0===t.button&&this.level&&this.level.Jt()})),this.Et.addEventListener("mouseenter",(s=>{this.level&&!this.Tt&&(t=s.clientX,i=s.clientY)})),this.Et.addEventListener("mousemove",(s=>{if(this.level&&!this.W&&!this.Tt){if(null===t)return t=s.clientX,void(i=s.clientY);this.camera.rx-=.4*(s.clientY-i),this.camera.ry-=.4*(s.clientX-t),this.camera.rx=Math.min(80,Math.max(-60,this.camera.rx)),this.camera.ry=this.camera.ry%360,W.camera(this.camera),t=s.clientX,i=s.clientY}})),s.R.At("KeyR",(()=>{this.Tt||(this.camera.rx=0,this.camera.ry=0,W.camera(this.camera))}))},resize(){const t=4/3;let i=window.innerWidth,s=window.innerHeight;i>s?(s-=40,i=Math.round(Math.min(i,s*t))):i<s&&(i-=40,s=Math.round(Math.min(s,i*t))),this.Et.width=i,this.Et.height=s,this.Nt.width=i,this.Nt.height=s,W.next?.camera&&(W.camera({fov:W.next.camera.fov}),W.gl.viewport(0,0,i,s))},Ut(){this.W?this.unpause():this.pause()},unpause(){this.W=!1,document.body.classList.remove("p"),W.W=!1},update(t=0){if(t&&this.Vt){const i=(t-this.Vt)/(1e3/s.D);if(this.Dt.clearRect(0,0,this.Nt.width,this.Nt.height),this.Dt.imageSmoothingEnabled=!1,this.Dt.fillStyle="#fff",this.Dt.font="11px monospace",this.Dt.textAlign="left",this.Dt.fillText(~~(s.D/i)+" FPS",10,20),this.W)return void this.Kt();if(this.Ct+=i,this.level.update(i),!this.Tt){const t=.3;s.R.wt(s.R.ht.lt)?this.camera.rx+=t:s.R.wt(s.R.ht.dt)&&(this.camera.rx-=t),s.R.wt(s.R.ht.Wt)?this.camera.ry+=t:s.R.wt(s.R.ht.ct)&&(this.camera.ry-=t),this.camera.rx=Math.min(80,Math.max(-60,this.camera.rx)),this.camera.ry=this.camera.ry%360,W.camera(this.camera)}}this.Vt=t}},s.$t={Ht:0,I:1,jt:2,Yt:3,qt:4,Qt:5,Xt:6},s.Zt={OPEN:1,OPENING:2,CLOSED:3,CLOSING:4,IDLE:5,ti:6},s.Gt=class{constructor(){this.ii=0,this.si=!0,this.ei=[],this.Ct=0,this.hi=[],this.ni=0,this.oi=s.Zt.OPEN,this.ri=s.Zt.IDLE,this.Wi=2,this.li=this.Wi,this.ai=[],this.loop=6,this.note=null,this.ci=s.$t.Ht,this.di=2.5,this.ui=3,this.fi=2,W.u({y:this.ui/2-.2}),W.plane({n:"title",z:-2,w:1,h:.2,b:"f00",t:s.P.o.title}),W.group({n:"ev"}),this._i(),this.yi(),this.xi(),this.gi(),this.pi(),this.mi(),this.bi(this.Wi),this.wi(this.loop),this.zi(this.Wi)}xi(){const t="display";W.group({n:t,g:"ev",y:this.ui/2-.25-.15,z:-this.fi/2+.06}),W.plane({g:t,n:"dis",w:.5,h:.25,b:"f00"})}yi(){const t=this.di/2,i=.05;this.ki=t/2+.0025,this.Mi=this.ki+this.di/2-this.di/3.5,W.group({n:"dlg",g:"ev",x:-this.Mi,z:-this.fi/2}),W.cube({g:"dlg",w:t,h:this.ui,d:i,b:"aaa",s:20}),W.plane({n:"dsl",g:"dlg",b:"0008",y:-this.ui/2-.001,z:-.27,h:100,rx:-90,ry:20,ns:1}),W.group({n:"drg",g:"ev",x:this.Mi,z:-this.fi/2}),W.cube({g:"drg",w:t,h:this.ui,d:i,b:"aaa",s:20}),W.plane({n:"dsr",g:"drg",b:"0008",y:-this.ui/2-.001,z:-.27,h:100,rx:-90,ry:-20,ns:1}),this.Oi=t/4,W.plane({n:"s_note1",g:"drg",x:(this.Oi-t)/2+.1,y:-.1,z:.025+.001,w:this.Oi,h:1.414*this.Oi,rz:-10,t:s.P.o.$})}gi(){const t="pad";W.group({n:t,g:"ev",x:this.di/2-.3,y:-.175,z:-this.fi/2+.051}),W.plane({g:t,w:.3,h:.7,b:"bbb",s:20});const i=.02,e=.1,h=.07,n=(e+i)/2;for(let o=0;o<14;o++){const r="btn"+o,l=o%2*(i+e)-n,a=~~(o/2)*(i+h)-.27,c=s.P.o["s_lbl_"+r];W.cube({g:t,n:r,x:l,y:a,w:e,h,d:.02,b:"ddd"}),W.plane({g:t,n:"s_lbl_"+r,x:l,y:a,z:.011,w:e,h,t:c}),13==o&&(this.Ai=JSON.parse(JSON.stringify(W.next[r])),this.Ti=JSON.parse(JSON.stringify(W.next["s_lbl_"+r])),this.Ti.t=c)}delete this.Ai.v,delete this.Ti.v}_i(){const t="ev";W.group({n:t,g:"ev"}),W.plane({g:t,y:-this.ui/2,w:this.di,h:this.fi,rx:-90,b:"333",t:s.P.o.floor,mix:.5}),W.plane({g:t,y:this.ui/2,w:this.di,h:this.fi,rx:90,b:"bbb",t:s.P.o.ceil,mix:.5}),W.plane({g:t,x:-this.di/2,ry:90,w:this.fi,h:this.ui,b:"999",t:s.P.o.j,s:30,mix:.5}),W.plane({g:t,x:this.di/2,ry:-90,w:this.fi,h:this.ui,b:"999",t:s.P.o.j,s:30,mix:.5}),W.plane({g:t,z:this.fi/2,ry:180,w:this.di,h:this.ui,b:"999",t:s.P.o.j,s:30,mix:.5}),W.cube({g:t,x:-this.di/2+.02,y:-this.ui/5,z:.025,w:.04,h:.15,d:this.fi-.15,b:"aaa",s:30}),W.cube({g:t,x:this.di/2-.02,y:-this.ui/5,z:.025,w:.04,h:.15,d:this.fi-.15,b:"aaa",s:30}),W.cube({g:t,y:-this.ui/5,z:this.fi/2-.02,w:this.di-.15,h:.15,d:.04,b:"aaa",s:30}),W.cube({g:t,x:-(this.di-this.di/4.5)/2,z:-this.fi/2,w:this.di/4.5,h:this.ui,d:.1,b:"999",t:s.P.o.Y,s:30,mix:.5}),W.cube({g:t,n:"s__fr",x:(this.di-this.di/4.5)/2,z:-this.fi/2,w:this.di/4.5,h:this.ui,d:.1,b:"999",t:s.P.o.Y,s:30,mix:.5}),W.cube({g:t,y:(this.ui-this.ui/4)/2,z:-this.fi/2,w:this.di,h:this.ui/4,d:.1,b:"999",t:s.P.o.q,s:30,mix:.5})}pi(){W.plane({n:"plane",y:-this.ui/2-.002,z:-this.fi/2-10,w:30,h:20,rx:90,rz:180,b:"111"}),W.plane({n:"e_red",y:.8,z:100,w:.5,h:.125,t:s.P.it("•   •","f00"),ns:1}),W.plane({n:"e_blue",x:.6,y:-.4,z:100,w:.5,h:.125,rx:30,ry:-45,t:s.P.it("•  •","77f"),ns:1}),W.group({n:"e_pink_all",z:100}),W.plane({g:"e_pink_all",n:"e_pink1",x:.4,y:.6,w:.7,h:.175,t:s.P.it("•   •","f2c"),ns:1}),W.plane({g:"e_pink_all",n:"e_pink2",x:.7,y:.2,w:.5,h:.125,ry:20,t:s.P.it("•  •","f2c")}),W.plane({g:"e_pink_all",n:"e_pink3",x:.9,y:-.1,w:.5,h:.125,ry:20,t:s.P.it("•   •","f2c")}),W.plane({g:"e_pink_all",n:"e_pink4",x:1.3,y:.1,w:.4,h:.1,ry:20,rx:-10,t:s.P.it("•  •","f2c")}),W.plane({g:"e_pink_all",n:"e_pink5",x:-.5,y:.3,w:.5,h:.125,ry:-20,t:s.P.it("•  •","f2c")}),W.plane({g:"e_pink_all",n:"e_pink6",x:-.8,w:.4,h:.1,ry:-20,t:s.P.it("•   •","f2c")}),W.plane({g:"e_pink_all",n:"e_pink7",x:-1.2,y:.2,w:.6,h:.15,ry:-20,t:s.P.it("•  •","f2c")}),W.plane({g:"e_pink_all",n:"e_pink8",x:-1.4,y:-.2,w:.5,h:.125,ry:-20,t:s.P.it("•   •","f2c")})}mi(){const t="fff",i=.005;W.group({n:"hl"}),W.cube({n:"hl_t",g:"hl",size:i,b:t,ns:1}),W.cube({n:"hl_r",g:"hl",size:i,b:t,ns:1}),W.cube({n:"hl_b",g:"hl",size:i,b:t,ns:1}),W.cube({n:"hl_l",g:"hl",size:i,b:t,ns:1})}Ei(){if(this.Ct-this.ii>.05*s.D){this.ii=this.Ct;const t=s.L.Ft();if(t&&t.n!=this.Si?.Ni){let i=t.n;i.startsWith("s_lbl_btn")&&(i=i.substring(6));W.next[i]&&(this.Si={Ni:t.n,n:i})}else!t&&this.Si&&(this.Si=null)}if(this.Di(this.Si),this.Si){const t=s.L.Nt,i=s.L.Dt;i.fillStyle="#fff",i.font="20px "+s.A,i.textAlign="center",i.fillText("[E]/LEFT-CLICK TO SELECT",t.width/2,t.height-42),s.R.wt(s.R.ht.ot,!0)&&this.Ii()}}Jt(){this.note?this.note=null:this.Ii()}Ci(t){const i=this.loop,e=this.hi.includes(13);let h=s.$t.Ht;if(1==i)13==t&&(h=s.$t.qt);else if(2==i)e||this.hi.push(13),3==t?W.move({n:"e_blue",rx:0,ry:0,a:500,onAnimDone:()=>{this.ei.push({duration:2,Fi:t=>(this.Pi(s.P.G.blue1,W.next.e_blue,"77f",t),t>2||3!=this.Wi)}),W.move({n:"e_blue",rx:30,ry:-45,a:2e3})}}):13==t&&(h=s.$t.qt);else{if(3==i){if(!e&&this.Ri([3,7])&&this.hi.push(13),3==t){const t={x:W.next.e_blue.x,y:W.next.e_blue.y,z:W.next.e_blue.z,h:W.next.e_blue.h};this.ei.push({duration:2,Fi:i=>(this.Pi(s.P.G.blue2,t,"77f",i),W.move({n:"e_blue",x:t.x+(Math.random()-.5)/60,y:t.y+(Math.random()-.5)/100}),this.ri==s.Zt.ti)})}else if(7==t)this.ei.push({duration:2,Fi:t=>(this.Pi(s.P.G.pink1,W.next.e_pink1,"f2c",t),t>1)});else if(13==t){const{y:t,z:i}=W.next.e_red,e=.3-t,h=-1.5-i;this.ei.push({duration:2,Fi:n=>(W.move({n:"e_red",y:t+e*n,z:i+h*n}),n>=1&&(this.Li(s.$t.qt),!0))})}return}if(4==i)!e&&this.Ri([3,4,7])&&this.hi.push(13),3==t?this.ei.push({duration:2,Fi:t=>(this.Pi(s.P.G.blue3,W.next.e_blue,"77f",t),t>1)}):7==t?this.ei.push({duration:2,Fi:t=>(this.Pi(s.P.G.pink2,W.next.e_pink1,"f2c",t),t>1)}):13==t&&(h=s.$t.qt);else if(5==i)if(3==t)this.ei.push({duration:2,Fi:t=>(this.Pi(s.P.G.blue4,W.next.e_blue,"7ae",t),t>1)});else if(7==t){const t=[5,6,8].map((t=>{const i="e_pink"+t;return{n:i,x:W.next[i].x,y:W.next[i].y}}));this.ei.push({duration:2,Fi:i=>(t.forEach((t=>{W.move({n:t.n,x:t.x+(Math.random()-.5)/60,y:t.y+(Math.random()-.5)/100})})),this.ri==s.Zt.ti)}),W.move({n:"e_red",rx:0,ry:0,rz:0,a:700,onAnimDone:()=>{const{x:t,y:i,z:e}=W.next.e_red;this.ei.push({duration:5,Fi:h=>this.oi==s.Zt.CLOSED?(s.Audio.text("*thud*","f00",3,{x:0,y:.1,z:-1}),W.move({n:"e_red",z:100}),!0):h>1?(this.Li(s.$t.Qt),!0):(W.move({n:"e_red",x:(1-h)*t,y:(1-h)*i,z:(1-h)*(e+1)-1}),!1)})}})}else 13==t?h=s.$t.qt:8!=t&&this.ai.includes(7)&&Math.random()<.3&&(W.move({n:"e_red",x:0,y:.5,z:-3}),this.ei.push({duration:5,Fi:t=>this.oi==s.Zt.CLOSED?(s.Audio.text("*thud*","f00",3,{x:0,y:.1,z:-1}),W.move({n:"e_red",z:100}),!0):t>1?(this.Li(s.$t.Qt),!0):(W.move({n:"e_red",y:.5*(1-t),z:-2*(1-t)-1}),!1)}));else 6==i&&1==t&&(h=s.$t.Xt)}this.Li(h)}Bi(){return[s.Zt.CLOSING,s.Zt.OPENING].includes(this.oi)}Ki(t){this.oi==s.Zt.CLOSED||this.Bi()?t?.():(this.oi=s.Zt.CLOSING,W.move({n:"dlg",x:-this.ki,a:2e3}),W.move({n:"drg",x:this.ki,a:2e3,onAnimDone:()=>{this.oi=s.Zt.CLOSED,t?.()}}))}Gi(t){this.oi==s.Zt.OPEN||this.Bi()?t?.():(this.oi=s.Zt.OPENING,W.move({n:"dlg",x:-this.Mi,a:2e3}),W.move({n:"drg",x:this.Mi,a:2e3,onAnimDone:()=>{this.oi=s.Zt.OPEN,t?.()}}))}Ui(t){if(t)if(t.n.startsWith("s_note"))this.note=t.n;else if(t.n.startsWith("btn")){if(!this.Ji(t.n)&&5==this.loop&&"btn13"==t.n)return W.move(this.Ai),W.move(this.Ti),void this.hi.push(13);if(this.ri==s.Zt.IDLE){if(!this.Ji(t.n))return void s.Audio.play(s.Audio.ERROR);s.Audio.play(s.Audio.st),s.Audio.text("*beep*","ff0",1,t);const i=Number(t.n.substring(3));if(0==i)return void this.Ki();if(this.Wi==i)return void(this.oi==s.Zt.OPEN?this.Ki():this.Gi());this.li=i,this.ri=s.Zt.ti,this.Ki((()=>this.Li(s.$t.Yt)))}}}Ri(t){for(let i=0;i<t.length;i++)if(!this.ai.includes(t[i]))return!1;return!0}Di(t){if(!(t&&this.Ji(t.n)||t&&(5!=this.loop||"btn13"==t.n)))return void W.move({n:"hl",z:100});const i=W.next[t.n],e=s.C(i),h=.005;W.move({n:"hl",x:e.x,y:e.y,z:e.z+(i.ry?0:.01),rx:i.rx,ry:i.ry,rz:i.rz}),W.move({n:"hl_t",y:e.h/2,w:e.w,h}),W.move({n:"hl_r",x:e.w/2,h:e.h,w:h}),W.move({n:"hl_b",y:-e.h/2,w:e.w,h}),W.move({n:"hl_l",x:-e.w/2,h:e.h,w:h})}Ji(t){return!t.startsWith("btn")||this.hi.includes(Number(t.replace("btn","")))}Vi(t){W.camera({x:0,y:0,z:0}),this.loop=t,this.ai=[],this.Wi=6==this.loop?13:1,this.li=this.Wi,this.bi(this.Wi),this.wi(t),this.Si=null}zi(t){const i=this.loop,s={n:"e_red",y:.8,z:100},e={n:"e_blue",y:0,z:100,rx:0},h={n:"e_pink_all",z:100};if(1==i)13==t&&(s.z=-3);else if(2==i)3==t?e.z=-4:13==t&&(s.z=-3);else if(3==i)3==t?e.z=-4:7==t?h.z=-3:13==t&&(s.z=-3);else if(4==i){const i={n:"s_note4",z:100};3==t?(e.y=-1,e.z=-5,e.rx=-90):4==t?i.z=-2:7==t&&(h.z=-3,s.x=W.next.e_pink7.x,s.y=W.next.e_pink7.y,s.z=-3,W.move({n:"e_pink7",z:100})),W.move(i)}else 5==i&&(3==t?e.z=-3:7==t?this.ai.includes(7)||(h.z=-3,W.move({n:"e_pink5",x:-.5,y:.2,ry:-30}),W.move({n:"e_pink6",y:-.1,ry:-30}),W.move({n:"e_pink8",x:-1.1,y:.1,ry:-30}),s.x=.75,s.z=-3,s.ry=30):8==t&&(W.move({n:"btn13",x:-.6,y:-1.2,z:-.2,rx:90,ry:10}),W.move({n:"s_lbl_btn13",x:-.6,y:-1.189,z:-.2,rx:-90,ry:10})));W.move(s),W.move(e),W.move(h)}wi(t){this.hi=[[0,13],[0,3],[0,3,7],[0,3,4,7],[0,2,3,4,5,6,7,8,9,10,11,12],[1]][t-1],2==t?W.plane({n:"s_note2",g:"dlg",x:.3,y:-.3,z:.0251,w:this.Oi,h:1.414*this.Oi,rz:20,t:s.P.o.$}):3==t?W.plane({n:"s_note3",x:this.di/2-.03,y:-.2,z:-.1,w:this.Oi,h:1.414*this.Oi,ry:-90,t:s.P.o.$}):4==t?W.plane({n:"s_note4",x:-.1,y:-this.ui/2,w:this.Oi,h:1.414*this.Oi,rx:-90,ry:5,t:s.P.o.$,b:"000",mix:.7}):5==t?(W.move({n:"btn13",z:100}),W.move({n:"s_lbl_btn13",z:100}),W.move({n:"e_blue",x:-1,y:-.4,ry:-45,t:s.P.it("•  •","7ae")})):6==t&&(W.clearColor("eee"),W.delete("plane"),W.delete("dsl"),W.delete("dsr")),t>1&&(W.delete("s_note1"),W.delete("title")),t>2&&W.delete("s_note2"),t>3&&W.delete("s_note3"),t>4&&(W.delete("s_note4"),W.delete("e_pink1"),W.delete("e_pink2"),W.delete("e_pink3"),W.delete("e_pink4"),W.delete("e_pink7"))}$i(){const t=[];for(let i=0;i<this.ei.length;i++){const e=this.ei[i];e.start??=this.Ct;const h=(this.Ct-e.start)/(e.duration*s.D);e.Fi(h)&&t.push(e)}this.ei=this.ei.filter((i=>!t.includes(i)))}Ii(){if(this.Si){const t=W.next[this.Si.n];this.Ui(t)}}bi(t){W.move({n:"dis",t:s.P.tt(t),mix:.25})}Li(t){if(this.ci==t)return;this.ci=t,this.si=!0;const i=this.loop,e={};if(t==s.$t.Yt){W.next.dialog&&W.move({n:"dialog",z:100});const t={x:W.next.camera.x,y:W.next.camera.y,z:W.next.camera.z},i=this.li-this.Wi;e.duration=Math.min(5,1.2*Math.abs(i)),e.Fi=e=>(this.bi(this.Wi+Math.round(e*i)),e>1?(this.zi(this.li),W.camera(t),s.Audio.play(s.Audio.et),s.Audio.text("*ding*","ff0",3,W.next.display),this.Wi=this.li,this.ai.push(this.Wi),this.Gi((()=>{this.ri=s.Zt.IDLE,this.Li(s.$t.Ht),setTimeout((()=>this.Ci(this.Wi)),1)})),!0):(W.camera({x:t.x+(2*Math.random()-1)/300,y:t.y+(2*Math.random()-1)/300,z:t.z+(2*Math.random()-1)/300}),!1))}else if(t==s.$t.qt){this.si=!1;const t=W.next.e_red.z;e.duration=3,e.Fi=e=>{s.L.Tt=!0;const h={z:0,rx:0,ry:0};return e>=1?(W.move({n:"e_red",z:100}),s.L.Tt=!1,this.Vi(i+1),setTimeout((()=>this.Li(s.$t.jt)),1),!0):(h.z=-.5*e,W.move({n:"e_red",z:t+h.z}),W.camera(h),!1)}}else t==s.$t.Qt?(this.si=!1,e.duration=3,e.Fi=t=>(s.L.Tt=!0,t>1?(s.L.Tt=!1,this.Vi(i),setTimeout((()=>this.Li(s.$t.jt)),1),!0):(s.L.Dt.fillStyle=`rgba(0,0,0,${t})`,s.L.Dt.fillRect(0,0,s.L.Nt.width,s.L.Nt.height),!1))):t==s.$t.jt?(this.si=!1,this.Ki(),e.duration=3,e.Fi=t=>{s.L.Tt=!0;const i={z:0,rx:0,ry:0};return t>1?(W.camera(i),s.L.Tt=!1,document.getElementById("p").hidden=!1,W.delete("title"),setTimeout((()=>this.Li(s.$t.Ht)),1),!0):(i.z=-.5*(1-Math.sin(t*Math.PI/2)),W.camera(i),!1)}):t==s.$t.I?(document.getElementById("p").hidden=!0,this.si=!1,e.duration=3,e.Fi=t=>(s.L.Tt=!0,W.camera({z:-.5,rx:0,ry:0}),t>=1&&setTimeout((()=>this.Li(s.$t.jt)),1),t>=1)):t==s.$t.Xt&&(document.getElementById("p").hidden=!0,this.si=!1,s.L.Tt=!0,W.camera({rx:0,ry:0,a:1e3,onAnimDone:()=>{e.duration=5,e.Fi=t=>{if(t<.2)return!1;t-=.2,W.camera({z:-2*t});const i=Math.min(t,1),e=s.L.Nt.width,h=s.L.Nt.height;return s.L.Dt.fillStyle=`rgba(238,238,238,${i})`,s.L.Dt.fillRect(0,0,e,h),s.L.Dt.font="96px "+s.N,s.L.Dt.textAlign="center",s.L.Dt.fillStyle=`rgba(110,110,110,${i})`,s.L.Dt.fillText("ESCAPED",e/2,h/2),!1},this.ei.push(e)}}));e.Fi&&this.ei.push(e)}Pi(t,i,e,h){W.next.dialog||([this.Hi,this.ji]=s.L.J(100,60,"dialog"),W.billboard({n:"dialog",ns:1,t:this.Hi})),h=Math.min(h,1),this.Hi.width=14*t.length,this.ji.clearRect(0,0,this.Hi.width,this.Hi.height),this.ji.font="600 24px "+s.T,this.ji.textAlign="center",this.ji.fillStyle="#"+e,this.ji.fillText(t.substring(0,h*t.length),this.Hi.width/2,this.Hi.height/2),W.gl.deleteTexture(W.o.dialog),delete W.o.dialog;const n=s.C(i),o=this.Hi.width/400;W.move({n:"dialog",x:n.x,y:n.y+n.h/2+.1,z:n.z,w:o,h:o*(this.Hi.height/this.Hi.width),t:this.Hi})}update(t){if(this.Ct+=t,this.$i(),this.note){const t=s.P.G[this.note];s.L.Bt(t),s.R.wt(s.R.ht.ot,!0)&&(this.note=null)}else this.si&&this.ri==s.Zt.IDLE&&this.Ei()}};