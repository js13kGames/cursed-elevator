pxtex=(t,s,i,e,W=10,h=10,r=10,o=t.getContext`2d`,n,a,l=Math.random)=>{for(t.width=h,t.height=r,n=h;n--;)for(a=r;a--;)o.fillStyle=`hsl(${s+(l()-.5)*W},${i+(l()-.5)*W}%,${e+(l()-.5)*W}%)`,o.fillRect(n,a,1,1)},debug=1,W={i:{},reset:s=>{W.canvas=s,W.objs=0,W.current={},W.next={},W.W={},W.o=!1,W.gl=s.getContext("webgl2"),W.gl.blendFunc(770,771),W.gl.activeTexture(33984),W.program=W.gl.createProgram(),W.gl.enable(2884),W.gl.shaderSource(t=W.gl.createShader(35633),"#version 300 es\nprecision highp float;in vec4 pos, col, uv, normal;uniform mat4 pv, eye, m, im;uniform vec4 bb;out vec4 v_pos, v_col, v_uv, v_normal;void main() {gl_Position = pv * (v_pos = bb.z > 0.? m[3] + eye * (pos * bb): m * pos);v_col = col;v_uv = uv;v_normal = transpose(inverse(m)) * normal;}"),W.gl.compileShader(t),W.gl.attachShader(W.program,t),console.log("vertex shader:",W.gl.getShaderInfoLog(t)||"OK"),W.gl.shaderSource(t=W.gl.createShader(35632),"#version 300 es\nprecision highp float;in vec4 v_pos, v_col, v_uv, v_normal;uniform vec3 light;uniform vec4 o;uniform sampler2D sampler;out vec4 c;void main() {vec3 light_dir = normalize(light - v_pos.xyz);c = mix(texture(sampler, v_uv.xy), v_col, o[3]);c = vec4(c.rgb * (max(0., dot(light_dir, normalize(o[0] > 0.? vec3(v_normal.xyz): cross(dFdx(v_pos.xyz), dFdy(v_pos.xyz)))))+ o[2]),c.a);}"),W.gl.compileShader(t),W.gl.attachShader(W.program,t),console.log("fragment shader:",W.gl.getShaderInfoLog(t)||"OK"),W.gl.linkProgram(W.program),W.gl.useProgram(W.program),console.log("program:",W.gl.getProgramInfoLog(W.program)||"OK"),W.gl.clearColor(1,1,1,1),W.clearColor=t=>W.gl.clearColor(...W.l(t)),W.clearColor("fff"),W.gl.enable(2929),W.u({y:1}),W.camera({fov:30}),setTimeout(W.draw,16)},m:(t,s,i,e,h=[],r,o,n,a,l,c,u,d)=>{if(t.n||="o"+W.objs++,t.size&&(t.w=t.h=t.d=t.size),t.t&&t.t.width&&!W.W[t.t.id]&&(i=W.gl.createTexture(),W.gl.pixelStorei(37441,!0),W.gl.bindTexture(3553,i),W.gl.pixelStorei(37440,1),W.gl.texImage2D(3553,0,6408,6408,5121,t.t),W.gl.generateMipmap(3553),W.W[t.t.id]=i),t.fov){const s=1/Math.tan(t.fov*Math.PI/180),i=.1,e=1e3,h=e-i;W.projection=new DOMMatrix([s/(W.canvas.width/W.canvas.height),0,0,0,0,s,0,0,0,0,-(e+i)/h,-1,0,0,-2*e*i/h,0])}t={type:s,...W.current[t.n]=W.next[t.n]||{w:1,h:1,d:1,x:0,y:0,z:0,rx:0,ry:0,rz:0,b:"888",mode:4,mix:0},...t,f:0},W.i[t.type]?.vertices&&!W.i?.[t.type].verticesBuffer&&(W.gl.bindBuffer(34962,W.i[t.type].verticesBuffer=W.gl.createBuffer()),W.gl.bufferData(34962,new Float32Array(W.i[t.type].vertices),35044),W.i[t.type].v||W.smooth(t),W.i[t.type].v&&(W.gl.bindBuffer(34962,W.i[t.type].normalsBuffer=W.gl.createBuffer()),W.gl.bufferData(34962,new Float32Array(W.i[t.type].v.flat()),35044))),W.i[t.type]?.uv&&!W.i[t.type].uvBuffer&&(W.gl.bindBuffer(34962,W.i[t.type].uvBuffer=W.gl.createBuffer()),W.gl.bufferData(34962,new Float32Array(W.i[t.type].uv),35044)),W.i[t.type]?.indices&&!W.i[t.type].indicesBuffer&&(W.gl.bindBuffer(34963,W.i[t.type].indicesBuffer=W.gl.createBuffer()),W.gl.bufferData(34963,new Uint16Array(W.i[t.type].indices),35044)),t.t?t.t&&!t.mix&&(t.mix=0):t.mix=1,W.next[t.n]=t},draw:(t,s,i,e,h=[])=>{if(s=t-W.lastFrame,W.lastFrame=t,requestAnimationFrame(W.draw),W.o)W.onDraw(t);else{for(e in W.next.camera.g&&W.p(W.next[W.next.camera.g],s,1),i=W.animation("camera"),W.next?.camera?.g&&i.preMultiplySelf(W.next[W.next.camera.g]._),W.gl.uniformMatrix4fv(W.gl.getUniformLocation(W.program,"eye"),!1,i.toFloat32Array()),i.invertSelf(),i.preMultiplySelf(W.projection),W.gl.uniformMatrix4fv(W.gl.getUniformLocation(W.program,"pv"),!1,i.toFloat32Array()),W.gl.clear(16640),W.next){const t=W.next[e];t.t||1!=W.l(t.b)[3]?h.push(t):W.p(t,s)}for(e of(h.sort(((t,s)=>W.A(s)-W.A(t))),W.gl.enable(3042),h))["plane","billboard"].includes(e.type)&&W.gl.depthMask(0),W.p(e,s),W.gl.depthMask(1);W.gl.disable(3042),W.gl.uniform3f(W.gl.getUniformLocation(W.program,"light"),W.M("light","x"),W.M("light","y"),W.M("light","z")),W.onDraw(t)}},p:(t,s,i=["camera","light","group"].includes(t.type),e)=>{t.t&&(W.gl.bindTexture(3553,W.W[t.t.id]),W.gl.uniform1i(W.gl.getUniformLocation(W.program,"sampler"),0)),t.f<t.a&&(t.f+=s),t.f>t.a&&(t.f=t.a),W.next[t.n]._=W.animation(t.n),W.next[t.g]&&W.next[t.n]._.preMultiplySelf(W.next[t.g]._),W.gl.uniformMatrix4fv(W.gl.getUniformLocation(W.program,"m"),!1,W.next[t.n]._.toFloat32Array()),W.gl.uniformMatrix4fv(W.gl.getUniformLocation(W.program,"im"),!1,DOMMatrix.fromMatrix(W.next[t.n]._).invertSelf().toFloat32Array()),i||(W.gl.bindBuffer(34962,W.i[t.type].verticesBuffer),W.gl.vertexAttribPointer(e=W.gl.getAttribLocation(W.program,"pos"),3,5126,!1,0,0),W.gl.enableVertexAttribArray(e),W.i[t.type].uvBuffer&&(W.gl.bindBuffer(34962,W.i[t.type].uvBuffer),W.gl.vertexAttribPointer(e=W.gl.getAttribLocation(W.program,"uv"),2,5126,!1,0,0),W.gl.enableVertexAttribArray(e)),(t.s||W.i[t.type].customNormals)&&W.i[t.type].normalsBuffer&&(W.gl.bindBuffer(34962,W.i[t.type].normalsBuffer),W.gl.vertexAttribPointer(e=W.gl.getAttribLocation(W.program,"normal"),3,5126,!1,0,0),W.gl.enableVertexAttribArray(e)),W.gl.uniform4f(W.gl.getUniformLocation(W.program,"o"),t.s,(t.mode>3||W.gl[t.mode]>3)&&!t.K?1:0,W.ambientLight||.2,t.mix),W.gl.uniform4f(W.gl.getUniformLocation(W.program,"bb"),t.w,t.h,"billboard"==t.type,0),W.i[t.type].indicesBuffer&&W.gl.bindBuffer(34963,W.i[t.type].indicesBuffer),W.gl.vertexAttrib4fv(W.gl.getAttribLocation(W.program,"col"),W.l(t.b)),W.i[t.type].indicesBuffer?W.gl.drawElements(+t.mode||W.gl[t.mode],W.i[t.type].indices.length,5123,0):W.gl.drawArrays(+t.mode||W.gl[t.mode],0,W.i[t.type].vertices.length/3))},M:(t,s)=>{const i=W.next[t];if(!i?.a)return i[s];const e=W.current[t];return e[s]+(i[s]-e[s])*(i.f/i.a)},animation:(t,s=new DOMMatrix)=>W.next[t]?s.translateSelf(W.M(t,"x"),W.M(t,"y"),W.M(t,"z")).rotateSelf(W.M(t,"rx"),W.M(t,"ry"),W.M(t,"rz")).scaleSelf(W.M(t,"w"),W.M(t,"h"),W.M(t,"d")):s,A:(t,s=W.next.camera)=>t?._&&s?._?(s._.m41-t._.m41)**2+(s._.m42-t._.m42)**2+(s._.m43-t._.m43)**2:0,D:t=>W.ambientLight=t,l:t=>[...t.match(t.length<5?/./g:/../g).map((s=>("0x"+s)/(t.length<5?15:255))),1],add:(t,s)=>{W.i[t]=s,s.v&&(W.i[t].customNormals=1),W[t]=s=>W.m(s,t)},group:t=>W.m(t,"group"),move:(t,s)=>setTimeout((()=>{W.m(t)}),s||1),delete:(t,s)=>setTimeout((()=>{delete W.next[t]}),s||1),camera:(t,s)=>setTimeout((()=>{W.m(t,t.n="camera")}),s||1),u:(t,s)=>s?setTimeout((()=>{W.m(t,t.n="light")}),s):W.m(t,t.n="light")},W.smooth=(t,s={},i=[],e,h,r,o,n,a,l,c,u,d,m)=>{for(W.i[t.type].v=[],r=0;r<W.i[t.type].vertices.length;r+=3)i.push(W.i[t.type].vertices.slice(r,r+3));for((e=W.i[t.type].indices)?h=1:(e=i,h=0),r=0;r<2*e.length;r+=3){o=r%e.length,n=i[c=h?W.i[t.type].indices[o]:o],a=i[u=h?W.i[t.type].indices[o+1]:o+1],l=i[d=h?W.i[t.type].indices[o+2]:o+2],AB=[a[0]-n[0],a[1]-n[1],a[2]-n[2]],BC=[l[0]-a[0],l[1]-a[1],l[2]-a[2]],m=r>o?[0,0,0]:[AB[1]*BC[2]-AB[2]*BC[1],AB[2]*BC[0]-AB[0]*BC[2],AB[0]*BC[1]-AB[1]*BC[0]];const v=n[0]+"_"+n[1]+"_"+n[2],f=a[0]+"_"+a[1]+"_"+a[2],b=l[0]+"_"+l[1]+"_"+l[2];s[v]||=[0,0,0],s[f]||=[0,0,0],s[b]||=[0,0,0],W.i[t.type].v[c]=s[v]=s[v].map(((t,s)=>t+m[s])),W.i[t.type].v[u]=s[f]=s[f].map(((t,s)=>t+m[s])),W.i[t.type].v[d]=s[b]=s[b].map(((t,s)=>t+m[s]))}},W.add("plane",{vertices:[.5,.5,0,-.5,.5,0,-.5,-.5,0,.5,.5,0,-.5,-.5,0,.5,-.5,0],uv:[1,1,0,1,0,0,1,1,0,0,1,0]}),W.add("billboard",W.i.plane),W.add("cube",{vertices:[.5,.5,.5,-.5,.5,.5,-.5,-.5,.5,.5,.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,.5,-.5,.5,.5,.5,.5,-.5,.5,.5,.5,-.5,.5,-.5,.5,.5,-.5,-.5,.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,.5,.5,-.5,-.5,.5,.5,.5,.5,.5,-.5,.5,.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,.5,.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,.5,-.5,.5,.5,-.5,.5,-.5,-.5,-.5,.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,.5,-.5,-.5,.5,-.5,-.5,-.5,.5,-.5,.5,-.5,-.5,-.5,.5,-.5,-.5],uv:[1,1,0,1,0,0,1,1,0,0,1,0,1,1,0,1,0,0,1,1,0,0,1,0,1,1,0,1,0,0,1,1,0,0,1,0,1,1,0,1,0,0,1,1,0,0,1,0,1,1,0,1,0,0,1,1,0,0,1,0,1,1,0,1,0,0,1,1,0,0,1,0]}),W.cube=t=>W.m(t,"cube"),W.add("pyramid",{vertices:[-.5,-.5,.5,.5,-.5,.5,0,.5,0,.5,-.5,.5,.5,-.5,-.5,0,.5,0,.5,-.5,-.5,-.5,-.5,-.5,0,.5,0,-.5,-.5,-.5,-.5,-.5,.5,0,.5,0,.5,-.5,.5,-.5,-.5,.5,-.5,-.5,-.5,.5,-.5,.5,-.5,-.5,-.5,.5,-.5,-.5],uv:[0,0,1,0,.5,1,0,0,1,0,.5,1,0,0,1,0,.5,1,0,0,1,0,.5,1,1,1,0,1,0,0,1,1,0,0,1,0]}),((t,s,i,e,h,r,o=[],n=[],a=[],l=20)=>{for(i=0;i<=l;i++)for(e=i*Math.PI/l,t=0;t<=l;t++)s=2*t*Math.PI/l,o.push(+(Math.sin(s)*Math.sin(e)/2).toFixed(6),+(Math.cos(e)/2).toFixed(6),+(Math.cos(s)*Math.sin(e)/2).toFixed(6)),a.push(3.5*Math.sin(t/l),-Math.sin(i/l)),t<l&&i<l&&n.push(h=i*(l+1)+t,r=h+l+1,h+1,h+1,r,r+1);W.add("sphere",{vertices:o,uv:a,indices:n})})();let s=new AudioContext;"use strict";const i={O:"Arial, sans-serif",S:'"Times New Roman", serif',C:60,init(){i.T.B((()=>{i.F.init(),i.P.init()}))},N(){const t=localStorage.getItem("2024_sd_elevator.save");return t?JSON.parse(t):null},R(t){localStorage.setItem("2024_sd_elevator.save",JSON.stringify({level:t}))}};window.addEventListener("load",(()=>i.init())),i.T={W:{},k(){for(let t=0;t<14;t++){const s="s_lbl_btn"+t,[e,W]=i.P.U(50,35);e.id=s,W.font="600 18px "+i.O,W.textAlign="center",W.textBaseline="middle",W.fillText(String(t+1).padStart(2,"0"),25,19.5),this.W[s]=e}},G(){const[t,s]=i.P.U(20,30);t.id="wall",pxtex(t,0,0,87,5,20,30),this.W.I=t},B(t){this.k(),this.G(),t()}},i.Audio={play(t){((t=1,i=.05,e=220,W=0,h=0,r=.1,o=0,n=1,a=0,l=0,c=0,u=0,d=0,m=0,v=0,f=0,b=0,y=1,p=0,g=0,_=0)=>{let x=Math,w=2*x.PI,A=44100,z=a*=500*w/A/A,M=e*=(1-i+2*i*x.random(i=[]))*w/A,K=0,D=0,O=0,S=1,C=0,E=0,B=0,T=_<0?-1:1,F=w*T*_*2/A,P=x.cos(F),N=x.sin,R=N(F)/4,k=1+R,U=-2*P/k,G=(1-R)/k,I=(1+T*P)/2/k,L=-(T+P)/k,$=I,j=0,H=0,J=0,q=0;for(l*=500*w/A**3,v*=w/A,c*=w/A,u*=A,d=A*d|0,t*=.3,T=(W=A*W+9)+(p*=A)+(h*=A)+(r*=A)+(b*=A)|0;O<T;i[O++]=B*t)++E%(100*f|0)||(B=o?1<o?2<o?3<o?N(K**3):x.max(x.min(x.tan(K),1),-1):1-(2*K/w%2+2)%2:1-4*x.abs(x.round(K/w)-K/w):N(K),B=(d?1-g+g*N(w*O/d):1)*(B<0?-1:1)*x.abs(B)**n*(O<W?O/W:O<W+p?1-(O-W)/p*(1-y):O<W+p+h?y:O<T-b?(T-O-b)/r*y:0),B=b?B/2+(b>O?0:(O<T-b?1:(T-O)/b)*i[O-b|0]/2/t):B,_&&(B=q=$*j+L*(j=H)+I*(H=B)-G*J-U*(J=q))),F=(e+=a+=l)*x.cos(v*D++),K+=F+F*m*N(O**5),S&&++S>u&&(e+=c,M+=c,S=0),!d||++C%d||(e=M,a=z,S=S||1);(t=s.createBuffer(1,T,A)).getChannelData(0).set(i),(e=s.createBufferSource()).buffer=t,e.connect(s.destination),e.start()})(...t)}},i.F={L:{$:1,j:2,H:3,J:10,q:11,Y:12,Z:13},V:{},X:{},tt:{},st:{},it(){this.et={[this.L.$]:{keyboard:["Escape"]},[this.L.q]:{keyboard:["ArrowUp","KeyW","KeyZ","KeyY"]},[this.L.J]:{keyboard:["ArrowLeft","KeyA","KeyQ"]},[this.L.Z]:{keyboard:["ArrowDown","KeyS"]},[this.L.Y]:{keyboard:["ArrowRight","KeyD"]},[this.L.j]:{keyboard:["KeyE","Enter"]}}},Wt(){let t=0,s=0;return this.ht(this.L.J)?t=-1:this.ht(this.L.Y)&&(t=1),this.ht(this.L.q)?s=-1:this.ht(this.L.Z)&&(s=1),{x:t,y:s}},rt(t){return this.et[t]},init(){this.it(),this.ot()},ht(t,s){const i=this.rt(t);for(const t of i.keyboard)if(this.nt(t,s))return!0;return!1},nt(t,s){const i=this.st[t];return!(!i||!i.time)&&(s&&(i.time=0,i.lt=!0),!0)},ct(t,s){const i=this.X[t]||[];i.push(s),this.X[t]=i},ut(t,s){const i=this.tt[t]||[];i.push(s),this.tt[t]=i},ot(){document.body.onkeydown=t=>{const s=this.st[t.code];s&&s.lt||(this.st[t.code]={time:Date.now()},this.X[t.code]&&this.X[t.code].forEach((t=>t())))},document.body.onkeyup=t=>{this.st[t.code]={time:0},this.tt[t.code]&&this.tt[t.code].forEach((t=>t()))}}},i.P={camera:{rx:0,ry:0},dt:new DOMPoint(0,0,-1),vt:0,ft(){let t=[];const s=this.bt(),i={min:[],max:[]};for(const e in W.next){if(!e.startsWith("s_"))continue;const h=W.next[e];let r=0;if("plane"!=h.type&&"billboard"!=h.type&&(r=h.d),i.min[0]=h.x-h.w/2,i.min[1]=h.y-h.h/2,i.min[2]=h.z-r/2,h.g){const t=W.next[h.g];i.min[0]+=t.x,i.min[1]+=t.y,i.min[2]+=t.z}i.max[0]=i.min[0]+h.w,i.max[1]=i.min[1]+h.h,i.max[2]=i.min[2]+r;const o=this.yt(s,i);o&&t.push([h,o])}return this.gt(s.origin,t)},_t(){this.xt.fillStyle="#00000070",this.xt.fillRect(0,0,this.wt.width,this.wt.height),this.xt.fillStyle="#fff",this.xt.font="96px "+i.S,this.xt.textAlign="center",this.xt.fillText("PAUSED",this.wt.width/2,this.wt.height/2)},gt(t,s){if(1==s.length)return s[0][0];let i=null,e=1/0;for(let W=0;W<s.length;W++){const h=s[W][1],r=[h[0]-t[0],h[1]-t[1],h[2]-t[2]],o=Math.sqrt(r[0]*r[0]+r[1]*r[1]+r[2]*r[2]);o<e&&(i=s[W][0],e=o)}return i},U(t,s){const i=document.createElement("canvas");i.width=t,i.height=s;const e=i.getContext("2d",{alpha:!0});return e.imageSmoothingEnabled=!1,[i,e]},bt(){const t=W.next.camera,s=(new DOMMatrix).rotateSelf(t.rx,t.ry,t.rz),i={origin:[t.x,t.y,t.z],dir:this.dt.matrixTransform(s)};return i.dir=[i.dir.x,i.dir.y,i.dir.z],i},init(){this.At=document.getElementById("c"),this.wt=document.getElementById("ui"),this.xt=this.wt.getContext("2d",{alpha:!0}),this.xt.imageSmoothingEnabled=!1,this.resize(),W.onDraw=this.update.bind(this),W.reset(this.At),W.clearColor("000"),W.D(.2),this.ot(),this.level=new i.zt},yt(t,s){let i=!0,e=[],W=[],h=[],r=[];for(let W=0;W<3;W++)t.origin[W]<s.min[W]?(e[W]=1,h[W]=s.min[W],i=!1):t.origin[W]>s.max[W]?(e[W]=0,h[W]=s.max[W],i=!1):e[W]=2;if(i)return t.origin;for(let s=0;s<3;s++)2!=e[s]&&0!=t.dir[s]?W[s]=(h[s]-t.origin[s])/t.dir[s]:W[s]=-1;let o=0;for(let t=1;t<3;t++)W[o]<W[t]&&(o=t);if(W[o]<0)return null;for(let i=0;i<3;i++)if(o!=i){if(r[i]=t.origin[i]+W[o]*t.dir[i],r[i]<s.min[i]||r[i]>s.max[i])return null}else r[i]=h[i];return r},update(t=0){if(t&&this.Mt){const s=(t-this.Mt)/(1e3/i.C);if(this.xt.clearRect(0,0,this.wt.width,this.wt.height),this.xt.imageSmoothingEnabled=!1,this.xt.fillStyle="#fff",this.xt.font="11px monospace",this.xt.textAlign="left",this.xt.fillText(~~(i.C/s)+" FPS",10,20),this.o)return void this._t();this.vt+=s,this.level.update(s)}this.Mt=t},pause(){this.o=!0,W.o=!0},ot(){let t=0,s=0;window.addEventListener("resize",(t=>this.resize()));const e=i.F.rt(i.F.L.$),h=()=>{this.Kt(),t=null,s=null};e.keyboard.forEach((t=>i.F.ut(t,h))),this.At.addEventListener("mousedown",(t=>{0===t.button&&this.level&&this.level.Dt()})),this.At.addEventListener("mouseenter",(i=>{t=i.clientX,s=i.clientY})),this.At.addEventListener("mousemove",(i=>{if(this.level&&!this.o){if(null===t)return t=i.clientX,void(s=i.clientY);this.camera.rx-=.5*(i.clientY-s),this.camera.ry-=.5*(i.clientX-t),this.camera.rx=Math.min(80,Math.max(-60,this.camera.rx)),this.camera.ry=this.camera.ry%360,W.camera(this.camera),t=i.clientX,s=i.clientY}})),i.F.ut("KeyR",(()=>{this.camera.rx=0,this.camera.ry=0,W.camera(this.camera)}))},resize(){this.At.width=1200,this.At.height=900,this.wt.width=1200,this.wt.height=900},Kt(){this.o?this.unpause():this.pause()},unpause(){this.o=!1,W.o=!1}},i.zt=class{constructor(){this.vt=0,this.Ot=0,this.St=2,this.Ct=3,this.Et=2,this.Bt(),this.Tt(),this.Ft(),this.Pt()}Ft(){const t="display";W.group({n:t,y:this.Ct/2-.25-.15,z:-this.Et/2+.06}),W.plane({g:t,w:.5,h:.25,b:"f00"})}Tt(){W.cube({n:"dl",x:-(this.St-this.St/5)/2,y:0,z:-this.Et/2,w:this.St/5*2,h:this.Ct,d:.05,b:"aaa"}),W.cube({n:"dr",x:(this.St-this.St/5)/2,y:0,z:-this.Et/2,w:this.St/5*2,h:this.Ct,d:.05,b:"aaa"})}Pt(){const t="pad";W.group({n:t,x:this.St/2-.15-.06,y:.075-.35,z:-this.Et/2+.06}),W.plane({g:t,w:.3,h:.7,b:"bbb"});const s=.02,e=.1,h=.07,r=(e+s)/2;for(let o=0;o<14;o++){const n="btn"+o,a=o%2*(s+e)-r,l=~~(o/2)*(s+h)-.27;W.cube({g:t,n,x:a,y:l,w:e,h,d:.02,b:"ddd"}),W.plane({g:t,n:"s_lbl_"+n,x:a,y:l,z:.011,w:e,h,t:i.T.W["s_lbl_"+n]})}}Bt(){const t="ev";W.group({n:t}),W.plane({g:t,x:0,y:-this.Ct/2,z:0,w:this.St,h:this.Et,rx:-90,b:"333"}),W.plane({g:t,x:0,y:this.Ct/2,z:0,w:this.St,h:this.Et,rx:90,b:"bbb"}),W.plane({g:t,x:-this.St/2,y:0,z:0,ry:90,w:this.Et,h:this.Ct,b:"999",t:i.T.W.I,mix:.5}),W.plane({g:t,x:this.St/2,y:0,z:0,ry:-90,w:this.Et,h:this.Ct,b:"999",t:i.T.W.I,mix:.5}),W.plane({g:t,x:0,y:0,z:this.Et/2,ry:180,w:this.St,h:this.Ct,b:"999",t:i.T.W.I,mix:.5}),W.cube({g:t,x:-(this.St-this.St/5)/2,y:0,z:-this.Et/2,w:this.St/5,h:this.Ct,d:.1,b:"999"}),W.cube({g:t,x:(this.St-this.St/5)/2,y:0,z:-this.Et/2,w:this.St/5,h:this.Ct,d:.1,b:"999"}),W.cube({g:t,x:0,y:(this.Ct-this.Ct/4)/2,z:-this.Et/2,w:this.St,h:this.Ct/4,d:.1,b:"999"})}Nt(t){t&&console.log(t)}Dt(){if(this.Rt){const t=W.next[this.Rt.n];this.Nt(t)}}update(t){if(this.vt+=t,this.vt-this.Ot>.05*i.C){this.Ot=this.vt;const t=i.P.ft();if(t&&t.n!=this.Rt?.kt){if(t.n.startsWith("s_lbl_btn")){const s=t.n.substring(6),i=W.next[s];i&&(this.Rt&&W.move({n:this.Rt.n,b:this.Rt.b}),this.Rt={kt:t.n,n:s,b:i.b},W.move({n:s,b:"fff"}))}}else!t&&this.Rt&&(W.move({n:this.Rt.n,b:this.Rt.b}),this.Rt=null)}this.Rt&&i.F.ht(i.F.L.j,!0)&&this.Dt()}},i.Ut=class{constructor(t,s=0){this.level=t,this.set(s)}Gt(){return this.level.vt>this.timeEnd}It(){return Math.min(1,1-(this.timeEnd-this.level.vt)/this.duration)}set(t){this.duration=t*i.C,this.timeEnd=this.level.vt+this.duration}};